<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YKS Kitap Takip</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3498DB">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“–</text></svg>">
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="YKS Kitap Takip">
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
          const [darkMode, setDarkMode] = useState(false);
          const [currentPage, setCurrentPage] = useState('home');
          const [books, setBooks] = useState([]);
          const [filter, setFilter] = useState({ type: 'all', subject: 'all' });
          const [searchTerm, setSearchTerm] = useState('');
          const [bookForm, setBookForm] = useState({
            name: '',
            author: '',
            publisher: '',
            type: '',
            subject: '',
            topics: []
          });
          const [editingBook, setEditingBook] = useState(null);
          const [selectedBook, setSelectedBook] = useState(null);

          // PWA Install prompt
          const [deferredPrompt, setDeferredPrompt] = useState(null);
          const [showInstallButton, setShowInstallButton] = useState(false);

          useEffect(() => {
            const handler = (e) => {
              e.preventDefault();
              setDeferredPrompt(e);
              setShowInstallButton(true);
            };

            window.addEventListener('beforeinstallprompt', handler);
            return () => window.removeEventListener('beforeinstallprompt', handler);
          }, []);

          const installPWA = async () => {
            if (!deferredPrompt) return;
            
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            
            if (outcome === 'accepted') {
              setDeferredPrompt(null);
              setShowInstallButton(false);
            }
          };

          // Icons (simplified for web version)
          const BookIcon = () => <span>ğŸ“–</span>;
          const MathIcon = () => <span>ğŸ§®</span>;
          const GeometryIcon = () => <span>ğŸ“</span>;
          const PhysicsIcon = () => <span>âš¡</span>;
          const ChemistryIcon = () => <span>ğŸ§ª</span>;
          const BiologyIcon = () => <span>ğŸƒ</span>;
          const HistoryIcon = () => <span>ğŸ•’</span>;
          const GeographyIcon = () => <span>ğŸŒ</span>;
          const PhilosophyIcon = () => <span>ğŸ§ </span>;
          const ReligionIcon = () => <span>â¤ï¸</span>;

          // Ders logolarÄ± ve renkleri
          const subjectConfig = {
            'TÃ¼rkÃ§e': { icon: BookIcon, color: '#E74C3C' },
            'Matematik': { icon: MathIcon, color: '#3498DB' },
            'Geometri': { icon: GeometryIcon, color: '#9B59B6' },
            'Fizik': { icon: PhysicsIcon, color: '#E67E22' },
            'Kimya': { icon: ChemistryIcon, color: '#27AE60' },
            'Biyoloji': { icon: BiologyIcon, color: '#1ABC9C' },
            'Tarih': { icon: HistoryIcon, color: '#8B4513' },
            'CoÄŸrafya': { icon: GeographyIcon, color: '#16A085' },
            'Felsefe': { icon: PhilosophyIcon, color: '#34495E' },
            'Din KÃ¼ltÃ¼rÃ¼': { icon: ReligionIcon, color: '#7D3C98' }
          };

          // TÃ¼m konular birleÅŸtirilmiÅŸ hali
          const allSubjectTopics = {
            'TÃ¼rkÃ§e': {
              TYT: [
                'SÃ¶zcÃ¼kte Anlam', 'SÃ¶z Yorumu', 'Deyim ve AtasÃ¶zÃ¼', 'CÃ¼mlede Anlam', 'Paragraf',
                'Paragrafta AnlatÄ±m Teknikleri', 'Paragrafta DÃ¼ÅŸÃ¼nceyi GeliÅŸtirme YollarÄ±', 'Paragrafta YapÄ±',
                'Paragrafta Konu-Ana DÃ¼ÅŸÃ¼nce', 'Paragrafta YardÄ±mcÄ± DÃ¼ÅŸÃ¼nce', 'Ses Bilgisi', 'YazÄ±m KurallarÄ±',
                'Noktalama Ä°ÅŸaretleri', 'SÃ¶zcÃ¼kte YapÄ±/Ekler', 'SÃ¶zcÃ¼k TÃ¼rleri', 'Ä°simler', 'Zamirler',
                'SÄ±fatlar', 'Zarflar', 'Edat â€“ BaÄŸlaÃ§ â€“ Ãœnlem', 'Fiiller', 'Fiilde Anlam', 'Ek Fiil',
                'Fiilimsi', 'Fiilde Ã‡atÄ±', 'SÃ¶zcÃ¼k GruplarÄ±', 'CÃ¼mlenin Ã–geleri', 'CÃ¼mle TÃ¼rleri', 'AnlatÄ±m BozukluÄŸu'
              ],
              AYT: [
                'Hikaye', 'Åiir', 'Roman', 'Tiyatro', 'Masal', 'Fabl', 'Destan', 'Efsane',
                'Biyografi', 'Otobiyografi', 'AnÄ±', 'HatÄ±ra', 'Mektup', 'E-Posta', 'GÃ¼nlÃ¼k', 'Blog',
                'Haber Metni', 'Gezi YazÄ±sÄ±', 'Makale', 'Sohbet', 'FÄ±kra', 'EleÅŸtiri', 'MÃ¼lakat',
                'RÃ¶portaj', 'Deneme', 'SÃ¶ylev', 'Nutuk', 'Ä°slamiyet Ã–ncesi TÃ¼rk EdebiyatÄ±',
                'Halk EdebiyatÄ±', 'Divan EdebiyatÄ±', 'Tanzimat EdebiyatÄ±', 'Servet-i FÃ¼nun',
                'Fecr-i Ati', 'Milli Edebiyat', 'Cumhuriyet DÃ¶nemi EdebiyatÄ±', 'BatÄ± Edebiyat AkÄ±mlarÄ±',
                'Anlam Bilgisi', 'Åiir Bilgisi', 'Edebi Sanatlar'
              ]
            },
            'Matematik': {
              TYT: [
                'Temel Kavramlar', 'SayÄ± BasamaklarÄ±', 'BÃ¶lme ve BÃ¶lÃ¼nebilme', 'EBOB â€“ EKOK',
                'Rasyonel SayÄ±lar', 'Basit EÅŸitsizlikler', 'Mutlak DeÄŸer', 'ÃœslÃ¼ SayÄ±lar', 'KÃ¶klÃ¼ SayÄ±lar',
                'Ã‡arpanlara AyÄ±rma', 'Oran OrantÄ±', 'Denklem Ã‡Ã¶zme', 'SayÄ± Problemleri', 'Kesir Problemleri',
                'YaÅŸ Problemleri', 'Hareket Problemleri', 'Ä°ÅŸÃ§i Problemleri', 'YÃ¼zde Problemleri',
                'Kar Zarar Problemleri', 'KarÄ±ÅŸÄ±m Problemleri', 'Grafik Problemleri', 'Rutin Olmayan Problemler',
                'KÃ¼meler', 'Kartezyen Ã‡arpÄ±m', 'MantÄ±k', 'Fonksiyonlar', 'Polinomlar', '2.Dereceden Denklemler',
                'PermÃ¼tasyon', 'Kombinasyon', 'OlasÄ±lÄ±k', 'Veri', 'Ä°statistik'
              ],
              AYT: [
                'KÃ¼meler', 'Denklem ve EÅŸitsizlikler', 'ÃœslÃ¼ Ä°fadeler', 'Fonksiyon KavramÄ±', 'ÃœÃ§genler',
                'Veri ve Grafik', 'Basit OlasÄ±lÄ±k', 'Sayma', 'Fonksiyonlarla Ä°ÅŸlemler', 'Fonksiyon Simetrileri',
                'BileÅŸke Fonksiyon', 'Ters Fonksiyon', 'DÃ¶rtgenler', 'Ã‡okgenler', 'Ä°kinci Dereceden Denklemler',
                'Polinomlar', 'Trigonometri', 'YÃ¶nlÃ¼ AÃ§Ä±lar', 'Trigonometrik Fonksiyonlar', 'Analitik Geometri',
                'DoÄŸrunun Analizi', 'Denklem Sistemleri', 'EÅŸitsizlik Sistemleri', 'Ã‡ember', 'Daire',
                'Uzay Geometri', 'KoÅŸullu OlasÄ±lÄ±k', 'Ãœstel Fonksiyonlar', 'Logaritma', 'Diziler',
                'Limit', 'SÃ¼reklilik', 'TÃ¼rev', 'TÃ¼revin UygulamalarÄ±', 'Belirsiz Ä°ntegral', 'Belirli Ä°ntegral',
                'Toplam-Fark FormÃ¼lleri', 'Trigonometrik Denklemler', 'DÃ¶nÃ¼ÅŸÃ¼mler', 'Ã‡emberin Analizi'
              ]
            },
            // DiÄŸer dersler iÃ§in kÄ±saltÄ±lmÄ±ÅŸ versiyon (gerÃ§ekte tÃ¼mÃ¼ olacak)
            'Fizik': {
              TYT: ['Fizik Bilimine GiriÅŸ', 'Madde ve Ã–zellikleri', 'BasÄ±nÃ§', 'IsÄ± ve SÄ±caklÄ±k', 'Hareket', 'Elektrik', 'Optik'],
              AYT: ['Mekanik', 'Termodinamik', 'Elektrik-Manyetizma', 'Optik', 'Modern Fizik', 'Atom FiziÄŸi']
            }
          };

          // KonularÄ± birleÅŸtir
          const getTopicsForBook = (type, subject) => {
            const topics = [];
            const subjectTopics = allSubjectTopics[subject];
            
            if (!subjectTopics) return [];
            
            if (type === 'TYT' && subjectTopics.TYT) {
              topics.push(...subjectTopics.TYT.map(topic => ({ name: topic, completed: false, type: 'TYT' })));
            } else if (type === 'AYT' && subjectTopics.AYT) {
              topics.push(...subjectTopics.AYT.map(topic => ({ name: topic, completed: false, type: 'AYT' })));
            } else if (type === 'TYT-AYT') {
              if (subjectTopics.TYT) {
                topics.push(...subjectTopics.TYT.map(topic => ({ name: topic, completed: false, type: 'TYT' })));
              }
              if (subjectTopics.AYT) {
                topics.push(...subjectTopics.AYT.map(topic => ({ name: topic, completed: false, type: 'AYT' })));
              }
            }
            
            return topics;
          };

          // Kitap ekle
          const addBook = () => {
            if (!bookForm.name || !bookForm.type || !bookForm.subject) return;
            
            const topics = getTopicsForBook(bookForm.type, bookForm.subject);
            
            const newBook = {
              id: Date.now(),
              ...bookForm,
              topics,
              createdAt: new Date().toISOString()
            };
            
            setBooks([...books, newBook]);
            setBookForm({ name: '', author: '', publisher: '', type: '', subject: '', topics: [] });
            setCurrentPage('home');
          };

          // Progress hesapla
          const getProgress = (topics) => {
            if (topics.length === 0) return 0;
            return Math.round((topics.filter(t => t.completed).length / topics.length) * 100);
          };

          const SubjectIcon = ({ subject, size = 20 }) => {
            const config = subjectConfig[subject];
            if (!config) return null;
            
            const IconComponent = config.icon;
            return <span style={{ color: config.color, fontSize: `${size}px` }}><IconComponent /></span>;
          };

          return (
            <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} transition-colors`}>
              {/* Header */}
              <header className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border-b sticky top-0 z-10`}>
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                  <div className="flex items-center justify-between h-16">
                    <div className="flex items-center gap-3">
                      <div className="bg-gradient-to-r from-blue-500 to-purple-600 p-2 rounded-lg">
                        <span className="text-white text-xl">ğŸ“–</span>
                      </div>
                      <h1 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                        YKS Kitap Takip
                      </h1>
                    </div>
                    
                    <div className="flex items-center gap-4">
                      {showInstallButton && (
                        <button
                          onClick={installPWA}
                          className="flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg font-medium text-sm"
                        >
                          ğŸ“± Telefona Kur
                        </button>
                      )}
                      
                      <button
                        onClick={() => setDarkMode(!darkMode)}
                        className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
                      >
                        {darkMode ? 'â˜€ï¸' : 'ğŸŒ™'}
                      </button>
                      
                      {currentPage === 'home' && (
                        <button
                          onClick={() => setCurrentPage('add')}
                          className="flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium"
                        >
                          â• Kitap Ekle
                        </button>
                      )}
                    </div>
                  </div>
                </div>
              </header>

              {/* Content */}
              <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                {/* Ana Sayfa Ä°Ã§eriÄŸi Buraya */}
                {currentPage === 'home' && (
                  <div className="text-center py-12">
                    <h2 className={`text-2xl font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                      YKS Kitap Takip UygulamasÄ±
                    </h2>
                    <p className={`text-lg mb-8 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>
                      YKS hazÄ±rlÄ±ÄŸÄ±nda kitaplarÄ±nÄ±zÄ± ve konularÄ±nÄ±zÄ± takip edin!
                    </p>
                    <button
                      onClick={() => setCurrentPage('add')}
                      className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium text-lg"
                    >
                      Ä°lk KitabÄ±nÄ± Ekle
                    </button>
                  </div>
                )}

                {/* Kitap Ekleme SayfasÄ± */}
                {currentPage === 'add' && (
                  <div className="max-w-2xl mx-auto">
                    <div className="flex items-center gap-3 mb-6">
                      <button
                        onClick={() => setCurrentPage('home')}
                        className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
                      >
                        â† Geri
                      </button>
                      <h1 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                        Yeni Kitap Ekle
                      </h1>
                    </div>

                    <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>
                      <div className="space-y-4">
                        {/* Kitap TÃ¼rÃ¼ */}
                        <div>
                          <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                            Kitap TÃ¼rÃ¼ *
                          </label>
                          <div className="grid grid-cols-3 gap-3">
                            {['TYT', 'AYT', 'TYT-AYT'].map(type => (
                              <button
                                key={type}
                                onClick={() => setBookForm({...bookForm, type})}
                                className={`p-3 rounded-lg border transition-all ${
                                  bookForm.type === type
                                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                                    : darkMode 
                                      ? 'border-gray-600 hover:border-gray-500 text-gray-300'
                                      : 'border-gray-300 hover:border-gray-400 text-gray-700'
                                }`}
                              >
                                {type}
                              </button>
                            ))}
                          </div>
                        </div>

                        {/* Ders SeÃ§imi */}
                        {bookForm.type && (
                          <div>
                            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                              Ders *
                            </label>
                            <div className="grid grid-cols-2 gap-3">
                              {Object.keys(subjectConfig).map(subject => (
                                <button
                                  key={subject}
                                  onClick={() => setBookForm({...bookForm, subject})}
                                  className={`flex items-center gap-3 p-3 rounded-lg border transition-all ${
                                    bookForm.subject === subject
                                      ? 'border-blue-500 bg-blue-50'
                                      : darkMode 
                                        ? 'border-gray-600 hover:border-gray-500 bg-gray-700'
                                        : 'border-gray-300 hover:border-gray-400 bg-white'
                                  }`}
                                >
                                  <SubjectIcon subject={subject} size={20} />
                                  <span className={`font-medium ${
                                    bookForm.subject === subject 
                                      ? 'text-blue-700' 
                                      : darkMode ? 'text-gray-300' : 'text-gray-700'
                                  }`}>
                                    {subject}
                                  </span>
                                </button>
                              ))}
                            </div>
                          </div>
                        )}

                        {/* Kitap Bilgileri */}
                        {bookForm.subject && (
                          <>
                            <div>
                              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                Kitap AdÄ± *
                              </label>
                              <input
                                type="text"
                                value={bookForm.name}
                                onChange={(e) => setBookForm({...bookForm, name: e.target.value})}
                                className={`w-full px-3 py-2 rounded-lg border ${
                                  darkMode 
                                    ? 'bg-gray-700 border-gray-600 text-white' 
                                    : 'bg-white border-gray-300 text-gray-900'
                                } focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                                placeholder="Kitap adÄ±nÄ± girin"
                              />
                            </div>

                            <div>
                              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                Yazar
                              </label>
                              <input
                                type="text"
                                value={bookForm.author}
                                onChange={(e) => setBookForm({...bookForm, author: e.target.value})}
                                className={`w-full px-3 py-2 rounded-lg border ${
                                  darkMode 
                                    ? 'bg-gray-700 border-gray-600 text-white' 
                                    : 'bg-white border-gray-300 text-gray-900'
                                } focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                                placeholder="Yazar adÄ±nÄ± girin"
                              />
                            </div>

                            <div>
                              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                YayÄ±n Evi
                              </label>
                              <input
                                type="text"
                                value={bookForm.publisher}
                                onChange={(e) => setBookForm({...bookForm, publisher: e.target.value})}
                                className={`w-full px-3 py-2 rounded-lg border ${
                                  darkMode 
                                    ? 'bg-gray-700 border-gray-600 text-white' 
                                    : 'bg-white border-gray-300 text-gray-900'
                                } focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                                placeholder="YayÄ±n evi adÄ±nÄ± girin"
                              />
                            </div>

                            <button
                              onClick={addBook}
                              disabled={!bookForm.name || !bookForm.type || !bookForm.subject}
                              className="w-full py-3 px-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors"
                            >
                              KitabÄ± Ekle
                            </button>
                          </>
                        )}
                      </div>
                    </div>
                  </div>
                )}
              </main>
            </div>
          );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
